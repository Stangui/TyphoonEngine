<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Typhoon Engine: imgui_freetype</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Typhoon Engine
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Multi-Platform Game Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">imgui_freetype </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Build font atlases using FreeType instead of stb_truetype (which is the default font rasterizer in Dear ImGui). <br />
by @vuhdo, @mikesart, @ocornut.</p>
<h3>Usage</h3>
<ol type="1">
<li>Get latest FreeType binaries or build yourself (under Windows you may use vcpkg with <code>vcpkg install freetype</code>).</li>
<li>Add <a class="el" href="imgui__freetype_8h_source.html">imgui_freetype.h</a>/cpp alongside your imgui sources.</li>
<li>Include <a class="el" href="imgui__freetype_8h_source.html">imgui_freetype.h</a> after <a class="el" href="imgui_8h_source.html">imgui.h</a>.</li>
<li>Call <code>ImGuiFreeType::BuildFontAtlas()</code> <em>BEFORE</em> calling <code>ImFontAtlas::GetTexDataAsRGBA32()</code> or <code>ImFontAtlas::Build()</code> (so normal Build() won't be called):</li>
</ol>
<div class="fragment"><div class="line"><span class="comment">// See ImGuiFreeType::RasterizationFlags</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags = ImGuiFreeType::NoHinting;</div><div class="line">ImGuiFreeType::BuildFontAtlas(io.Fonts, flags);</div><div class="line">io.Fonts-&gt;GetTexDataAsRGBA32(&amp;pixels, &amp;width, &amp;height);</div></div><!-- fragment --><h3>Gamma Correct Blending</h3>
<p>FreeType assumes blending in linear space rather than gamma space. See FreeType note for <a href="https://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Render_Glyph">FT_Render_Glyph</a>. For correct results you need to be using sRGB and convert to linear space in the pixel shader output. The default Dear ImGui styles will be impacted by this change (alpha values will need tweaking).</p>
<p>### Test code Usage </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;misc/freetype/imgui_freetype.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;misc/freetype/imgui_freetype.cpp&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// Load various small fonts</span></div><div class="line"><a class="code" href="struct_im_gui_i_o.html">ImGuiIO</a>&amp; io = ImGui::GetIO();</div><div class="line">io.Fonts-&gt;AddFontFromFileTTF(<span class="stringliteral">&quot;../../misc/fonts/Roboto-Medium.ttf&quot;</span>, 13.0f);</div><div class="line">io.Fonts-&gt;AddFontFromFileTTF(<span class="stringliteral">&quot;../../misc/fonts/Cousine-Regular.ttf&quot;</span>, 13.0f);</div><div class="line">io.Fonts-&gt;AddFontDefault();</div><div class="line"></div><div class="line">FreeTypeTest freetype_test;</div><div class="line"></div><div class="line"><span class="comment">// Main Loop</span></div><div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>)</div><div class="line">{</div><div class="line">   <span class="keywordflow">if</span> (freetype_test.UpdateRebuild())</div><div class="line">   {</div><div class="line">      <span class="comment">// REUPLOAD FONT TEXTURE TO GPU</span></div><div class="line">      ImGui_ImplXXX_DestroyDeviceObjects();</div><div class="line">      ImGui_ImplXXX_CreateDeviceObjects();</div><div class="line">   }</div><div class="line">   ImGui::NewFrame();</div><div class="line">   freetype_test.ShowFreetypeOptionsWindow();</div><div class="line">   ...</div><div class="line">}</div></div><!-- fragment --><p>### Test code </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;misc/freetype/imgui_freetype.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;misc/freetype/imgui_freetype.cpp&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">struct </span>FreeTypeTest</div><div class="line">{</div><div class="line">    <span class="keyword">enum</span> FontBuildMode</div><div class="line">    {</div><div class="line">        FontBuildMode_FreeType,</div><div class="line">        FontBuildMode_Stb</div><div class="line">    };</div><div class="line"></div><div class="line">    FontBuildMode BuildMode;</div><div class="line">    <span class="keywordtype">bool</span>          WantRebuild;</div><div class="line">    <span class="keywordtype">float</span>         FontsMultiply;</div><div class="line">    <span class="keywordtype">int</span>           FontsPadding;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  FontsFlags;</div><div class="line"></div><div class="line">    FreeTypeTest()</div><div class="line">    {</div><div class="line">        BuildMode = FontBuildMode_FreeType;</div><div class="line">        WantRebuild = <span class="keyword">true</span>;</div><div class="line">        FontsMultiply = 1.0f;</div><div class="line">        FontsPadding = 1;</div><div class="line">        FontsFlags = 0;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Call _BEFORE_ NewFrame()</span></div><div class="line">    <span class="keywordtype">bool</span> UpdateRebuild()</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (!WantRebuild)</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        <a class="code" href="struct_im_gui_i_o.html">ImGuiIO</a>&amp; io = ImGui::GetIO();</div><div class="line">        io.Fonts-&gt;TexGlyphPadding = FontsPadding;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; io.Fonts-&gt;ConfigData.Size; n++)</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_im_font_config.html">ImFontConfig</a>* font_config = (<a class="code" href="struct_im_font_config.html">ImFontConfig</a>*)&amp;io.Fonts-&gt;ConfigData[n];</div><div class="line">            font_config-&gt;RasterizerMultiply = FontsMultiply;</div><div class="line">            font_config-&gt;RasterizerFlags = (BuildMode == FontBuildMode_FreeType) ? FontsFlags : 0x00;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (BuildMode == FontBuildMode_FreeType)</div><div class="line">            ImGuiFreeType::BuildFontAtlas(io.Fonts, FontsFlags);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BuildMode == FontBuildMode_Stb)</div><div class="line">            io.Fonts-&gt;Build();</div><div class="line">        WantRebuild = <span class="keyword">false</span>;</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Call to draw interface</span></div><div class="line">    <span class="keywordtype">void</span> ShowFreetypeOptionsWindow()</div><div class="line">    {</div><div class="line">        ImGui::Begin(<span class="stringliteral">&quot;FreeType Options&quot;</span>);</div><div class="line">        ImGui::ShowFontSelector(<span class="stringliteral">&quot;Fonts&quot;</span>);</div><div class="line">        WantRebuild |= ImGui::RadioButton(<span class="stringliteral">&quot;FreeType&quot;</span>, (<span class="keywordtype">int</span>*)&amp;BuildMode, FontBuildMode_FreeType);</div><div class="line">        ImGui::SameLine();</div><div class="line">        WantRebuild |= ImGui::RadioButton(<span class="stringliteral">&quot;Stb (Default)&quot;</span>, (<span class="keywordtype">int</span>*)&amp;BuildMode, FontBuildMode_Stb);</div><div class="line">        WantRebuild |= ImGui::DragFloat(<span class="stringliteral">&quot;Multiply&quot;</span>, &amp;FontsMultiply, 0.001f, 0.0f, 2.0f);</div><div class="line">        WantRebuild |= ImGui::DragInt(<span class="stringliteral">&quot;Padding&quot;</span>, &amp;FontsPadding, 0.1f, 0, 16);</div><div class="line">        <span class="keywordflow">if</span> (BuildMode == FontBuildMode_FreeType)</div><div class="line">        {</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;NoHinting&quot;</span>,     &amp;FontsFlags, ImGuiFreeType::NoHinting);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;NoAutoHint&quot;</span>,    &amp;FontsFlags, ImGuiFreeType::NoAutoHint);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;ForceAutoHint&quot;</span>, &amp;FontsFlags, ImGuiFreeType::ForceAutoHint);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;LightHinting&quot;</span>,  &amp;FontsFlags, ImGuiFreeType::LightHinting);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;MonoHinting&quot;</span>,   &amp;FontsFlags, ImGuiFreeType::MonoHinting);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;Bold&quot;</span>,          &amp;FontsFlags, ImGuiFreeType::Bold);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;Oblique&quot;</span>,       &amp;FontsFlags, ImGuiFreeType::Oblique);</div><div class="line">            WantRebuild |= ImGui::CheckboxFlags(<span class="stringliteral">&quot;Monochrome&quot;</span>,    &amp;FontsFlags, ImGuiFreeType::Monochrome);</div><div class="line">        }</div><div class="line">        ImGui::End();</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><h3>Known issues</h3>
<ul>
<li><code>cfg.OversampleH</code>, <code>OversampleV</code> are ignored (but perhaps not so necessary with this rasterizer). </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
